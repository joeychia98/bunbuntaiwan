<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ä¼æ¥­è¨‚è³¼ | BUN BUN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style3.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    .step-content { display: none; }
    .step-content.active { display: block; }
    button { margin: 10px; padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>
  <header class="navbar">
    <div class="logo">
      <a href="index.html"><img src="logo.jpg" alt="BUN BUN Logo"></a>
    </div>
    <nav class="nav-links">
      <a href="index.html">é¦–é </a>
      <a href="order.html">èœå–®/ä¼æ¥­è¨‚è³¼</a>
      <a href="about.html">åˆ†åº—è³‡è¨Š</a>
    </nav>
    <div class="cart-icon" onclick="toggleCart()">
      <i class="fas fa-shopping-cart"></i>
      <span id="cart-count" class="hidden">0</span>
    </div>
  </header>

  <main style="margin-top:150px; padding:20px;">
    <!-- STEP 1 -->
    <div class="step-content active" id="step1">
      <h2>è¨‚å–®æ˜ç´°</h2>
      <table id="checkout-table" border="1" cellpadding="8">
        <thead>
          <tr>
            <th>å“é …</th>
            <th>æ•¸é‡</th>
            <th>å–®åƒ¹</th>
            <th>å°è¨ˆ</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr>
            <td colspan="3" style="text-align:right;">ç¸½è¨ˆï¼š</td>
            <td id="total-price">$0</td>
          </tr>
        </tfoot>
      </table>
      <div style="margin-top:20px;">
        <button type="button" onclick="location.href='order.html'">è¿”å›èœå–®ä¿®æ”¹</button>
        <button type="button" onclick="nextStep(2)">ä¸‹ä¸€æ­¥</button>
      </div>
    </div>

    <!-- STEP 2 -->
    <div class="step-content" id="step2">
      <h2>å¡«å¯«è¨‚è³¼è³‡æ–™</h2>
      <form id="orderForm">
        <label>å§“å: <input type="text" id="buyerName" required></label><br>
        <label>æ‰‹æ©Ÿ: <input type="tel" id="buyerPhone" required></label><br>
        <label>Line ID: <input type="text" id="buyerLineId" required></label><br>
        <label>é€é”æ—¥æœŸ: <input type="date" id="deliveryDate" required></label><br>
        <label>é€é”æ™‚é–“: <input type="time" id="deliveryTime" required></label><br>
        <label>é€é”åœ°å€: <input type="text" id="deliveryLocation" required></label><br>
        <p>å¤–ç¸£å¸‚ä¹Ÿå¯ä¾ç›’æ•¸è¨è«–å¯é€é”è·é›¢(è«‹èˆ‡æˆ‘å€‘Lineè¯ç¹«)</p>
        <label>æ”¶è²¨äººå§“å: <input type="text" id="recipientName" required></label><br>
        <label>æ”¶è²¨äººæ‰‹æ©Ÿ: <input type="tel" id="recipientPhone" required></label><br>
        <label><input type="checkbox" id="sameAsBuyer"> æ”¶è²¨äººèˆ‡è¨‚è³¼äººç›¸åŒ</label><br>
        <label>ç™¼ç¥¨é¸é …:
          <select id="receiptOption">
            <option value="æ‰‹é–‹æ”¶æ“š">æ‰‹é–‹æ”¶æ“š</option>
            <option value="çµ±ç·¨">çµ±ç·¨</option>
            <option value="ç´™æœ¬ç™¼ç¥¨">ç´™æœ¬ç™¼ç¥¨</option>
          </select>
        </label>
        <div id="taxIdField" style="display:none;">
          <label>çµ±ä¸€ç·¨è™Ÿ: <input type="text" id="taxId" maxlength="8"></label>
        </div>
      </form>
      <div style="margin-top:20px;">
        <button type="button" onclick="prevStep(1)">ä¸Šä¸€æ­¥</button>
        <button type="button" onclick="nextStep(3)">ä¸‹ä¸€æ­¥</button>
      </div>
    </div>

    <!-- STEP 3 -->
    <div class="step-content" id="step3">
      <h2>ç¢ºèªè¨‚å–®è³‡è¨Š</h2>
      <div id="confirm-summary">
        <!-- JS æœƒå¸¶é€² summary -->
      </div>
      <div style="margin-top:20px;">
        <button type="button" onclick="prevStep(2)">ä¸Šä¸€æ­¥</button>
        <button type="button" onclick="submitOrder()">ç¢ºèªé€å‡º</button>
      </div>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-column">
        <h3>ç¤¾ç¾¤å¹³å°</h3>
        <div class="footer-social-icon-wrapper">
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-facebook"></i></a>
        </div>
      </div>
      <div class="footer-column">
        <h3>è¯çµ¡æˆ‘å€‘</h3>
        <p>Email: bunbuntcc@gmail.com</p>
        <p>/ BUN BUN SHOP /</p>
        <p>å°ä¸­ åœ‹ç¾åº—</p>
      </div>
    </div>
  </footer>

  <div id="cart-box" class="cart hidden">
    <h4>ğŸ›’ è³¼ç‰©è»Š</h4>
    <ul id="cart-items"></ul>
    <div id="cart-total">ç¸½é‡‘é¡ï¼šNT$0</div>
    <button class="checkout-btn" onclick="checkout()">çµå¸³</button>
  </div>

  <script>
    function nextStep(step) {
      document.querySelectorAll(".step-content").forEach(el => el.classList.remove("active"));
      document.getElementById("step"+step).classList.add("active");
      if (step === 3) {
        // å¡«å…¥ summary
        let summary = `
          <h3>è¯çµ¡è³‡è¨Š</h3>
          å§“å: ${document.getElementById("buyerName").value}<br>
          æ‰‹æ©Ÿ: ${document.getElementById("buyerPhone").value}<br>
          Line ID: ${document.getElementById("buyerLineId").value}<br>
          æ—¥æœŸ: ${document.getElementById("deliveryDate").value}<br>
          æ™‚é–“: ${document.getElementById("deliveryTime").value}<br>
          åœ°å€: ${document.getElementById("deliveryLocation").value}<br>
        `;
        document.getElementById("confirm-summary").innerHTML = summary;
      }
    }
    function prevStep(step) {
      document.querySelectorAll(".step-content").forEach(el => el.classList.remove("active"));
      document.getElementById("step"+step).classList.add("active");
    }
    function submitOrder() {
      alert("è¨‚å–®å·²é€å‡ºï¼æˆ‘å€‘æœƒç›¡å¿«èˆ‡æ‚¨è¯ç¹«ï¼");
      location.href="index.html";
    }
    // åŒæ­¥æ”¶ä»¶äºº
    document.getElementById("sameAsBuyer").addEventListener("change", function() {
      if (this.checked) {
        document.getElementById("recipientName").value = document.getElementById("buyerName").value;
        document.getElementById("recipientPhone").value = document.getElementById("buyerPhone").value;
      }
    });
    // çµ±ç·¨é¡¯ç¤º
    document.getElementById("receiptOption").addEventListener("change", function(){
      if (this.value === "çµ±ç·¨") {
        document.getElementById("taxIdField").style.display="block";
      } else {
        document.getElementById("taxIdField").style.display="none";
      }
    });
  </script>
</body>
</html>
